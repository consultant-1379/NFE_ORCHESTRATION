<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://activiti.org/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" id="_hxrZULtIEeOs2vS_muVNeg" targetNamespace="http://activiti.org/bpmn">
  <bpmn2:process id="updateextremeswitch" name="updateextremeswitch" isExecutable="true">
    <bpmn2:documentation>Upadte Extreme switch with correct port number</bpmn2:documentation>
    <bpmn2:extensionElements>
      <camunda:executionListener class="com.ericsson.oss.nfe.poc.listeners.AppConfigLoader" event="start"/>
    </bpmn2:extensionElements>
    <bpmn2:serviceTask id="GetNetworkByRange__prg__p50" camunda:class="com.ericsson.oss.nfe.poc.tasks.GenericOpenStackRESTInvoker" name="REST Call Get Network by IPRange">
      <bpmn2:extensionElements>
        <camunda:field name="method" stringValue="GET"/>
        <camunda:field name="endpointURL">
          <camunda:expression>${getnwurl}</camunda:expression>
        </camunda:field>
        <camunda:field name="outPutVariable">
          <camunda:string>getSubnetsResp</camunda:string>
        </camunda:field>
        <camunda:field name="requestString">
          <camunda:string>--</camunda:string>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_5</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_1</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:scriptTask id="ExtractBuildURL__prg__p55" name="ExtractNetworkID Build URL" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_1</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_2</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def respSTR = execution.getVariable('getSubnetsResp')
def slurper = new groovy.json.JsonSlurper()
def respJson = slurper.parseText(respSTR)
def networkID = respJson.subnets[0].network_id
def getnwurl = execution.getVariable('appConfigProps')['OPEN_STACK_GET_NETWORK']
println ' subnetsobtained is ---> '+networkID
getnwurl = getnwurl + networkID
execution.setVariable('getnwurl',   getnwurl)]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_1" name="" sourceRef="GetNetworkByRange__prg__p50" targetRef="ExtractBuildURL__prg__p55"/>
    <bpmn2:serviceTask id="GetNetworkByID__prg__p65" camunda:class="com.ericsson.oss.nfe.poc.tasks.GenericOpenStackRESTInvoker" name="Get NrtworkByID REST Call">
      <bpmn2:extensionElements>
        <camunda:field name="method" stringValue="GET"/>
        <camunda:field name="endpointURL">
          <camunda:expression>${getnwurl}</camunda:expression>
        </camunda:field>
        <camunda:field name="outPutVariable">
          <camunda:string>getNetworkResp</camunda:string>
        </camunda:field>
        <camunda:field name="requestString">
          <camunda:string>--</camunda:string>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_2</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_4</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_2" name="" sourceRef="ExtractBuildURL__prg__p55" targetRef="GetNetworkByID__prg__p65"/>
    <bpmn2:serviceTask id="ExtractSegmentationID__prg__p75" camunda:class="com.ericsson.oss.nfe.poc.tasks.GenericJSONExtractor" name="Extract SegmentationID">
      <bpmn2:extensionElements>
        <camunda:field name="inputExpr">
          <camunda:expression>${getNetworkResp}</camunda:expression>
        </camunda:field>
        <camunda:field name="jsonPath">
          <camunda:string>$.network.provider:segmentation_id</camunda:string>
        </camunda:field>
        <camunda:field name="outPutVariable">
          <camunda:string>segID</camunda:string>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_4</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_15</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_4" name="" sourceRef="GetNetworkByID__prg__p65" targetRef="ExtractSegmentationID__prg__p75"/>
    <bpmn2:scriptTask id="BuildAuthRequest__prg__p5" name="BuildAuth Request" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_9</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_10</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def authStr = '{"auth": {"tenantName": "ericsson", "passwordCredentials": {"username": "admin", "password": "foobar"}}}'
def url = execution.getVariable('appConfigProps')['OPEN_STACK_AUTH']
execution.setVariable("authReqStr",authStr)
execution.setVariable('authURL',   url)]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_10" name="" sourceRef="BuildAuthRequest__prg__p5" targetRef="Authenticate__prg__p10"/>
    <bpmn2:serviceTask id="Authenticate__prg__p10" camunda:class="com.ericsson.oss.nfe.poc.tasks.GenericOpenStackRESTInvoker" name="Authenticate OPEN Stack">
      <bpmn2:extensionElements>
        <camunda:field name="method" stringValue="POST"/>
        <camunda:field name="endpointURL">
          <camunda:expression>${authURL}</camunda:expression>
        </camunda:field>
        <camunda:field name="outPutVariable">
          <camunda:string>authOpnStackResp</camunda:string>
        </camunda:field>
        <camunda:field name="requestString">
          <camunda:expression>${authReqStr}</camunda:expression>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_10</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_3</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_3" name="" sourceRef="Authenticate__prg__p10" targetRef="ExtractToken__prg__p15"/>
    <bpmn2:scriptTask id="ExtractToken__prg__p15" name="ExtractOpen Stack Token" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_3</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_6</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def respSTR = execution.getVariable('authOpnStackResp')
def slurper = new groovy.json.JsonSlurper()
def respJson = slurper.parseText(respSTR)
def osauthToken = respJson.access.token.id
execution.setVariable("osauthToken",osauthToken);
println ' Open stack auth token obtained is ---> '+osauthToken
]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_6" name="" sourceRef="ExtractToken__prg__p15" targetRef="CheckNameIDMap__prg"/>
    <bpmn2:scriptTask id="BuildECMRequest__prg__p25" name="build ECM Request" scriptFormat="groovy">
      <bpmn2:incoming>name_ids_set</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_12</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_13</bpmn2:outgoing>
      <bpmn2:script><![CDATA[
def url = execution.getVariable('appConfigProps')['BASE_ECM_URL']
def map = execution.getVariable('ECM_NAMEID_MAP')
println ' [BASE_ECM_URL] ' + url  + ' execution.getVariable(ECM_NAMEID_MAP) ' + map
def epgpublicvnid = execution.getVariable('ECM_NAMEID_MAP')['EPG-Public-VN']
execution.setVariable("PUBLIC_VN_ID",url+"/vns/"+epgpublicvnid );]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_13" name="" sourceRef="BuildECMRequest__prg__p25" targetRef="ECMRequest__prg__p30"/>
    <bpmn2:serviceTask id="PopulateVMS__prg__p20" camunda:class="com.ericsson.oss.nfe.poc.tasks.QuerryAndPopulateOrderItems" name="populateVMS">
      <bpmn2:incoming>SequenceFlow_11</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_12</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_12" name="" sourceRef="PopulateVMS__prg__p20" targetRef="BuildECMRequest__prg__p25"/>
    <bpmn2:serviceTask id="ECMRequest__prg__p30" camunda:class="com.ericsson.oss.nfe.poc.tasks.GenericECMRESTInvoker" name="ECM Request">
      <bpmn2:extensionElements>
        <camunda:field name="method" stringValue="GET"/>
        <camunda:field name="endpointURL">
          <camunda:expression>${PUBLIC_VN_ID}</camunda:expression>
        </camunda:field>
        <camunda:field name="outPutVariable">
          <camunda:string>JSON_EPG_PUBLIC_RANGE</camunda:string>
        </camunda:field>
        <camunda:field name="requestString">
          <camunda:string>--</camunda:string>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_13</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_14</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_14" name="" sourceRef="ECMRequest__prg__p30" targetRef="Extract_JSON__prg__p35"/>
    <bpmn2:exclusiveGateway id="CheckNameIDMap__prg" default="name_ids_set">
      <bpmn2:incoming>SequenceFlow_6</bpmn2:incoming>
      <bpmn2:outgoing>name_ids_set</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_11</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="name_ids_set" name="" sourceRef="CheckNameIDMap__prg" targetRef="BuildECMRequest__prg__p25"/>
    <bpmn2:sequenceFlow id="SequenceFlow_11" name="" sourceRef="CheckNameIDMap__prg" targetRef="PopulateVMS__prg__p20">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${empty execution.getVariable('ECM_NAMEID_MAP')} </bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="SequenceFlow_15" name="" sourceRef="ExtractSegmentationID__prg__p75" targetRef="ExclusiveGateway_2__prg"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway_2__prg" default="SequenceFlow_23">
      <bpmn2:incoming>SequenceFlow_15</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_22_isset</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_23</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_22_isset" name="" sourceRef="ExclusiveGateway_2__prg" targetRef="ExclusiveGateway_1__prg">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${execution.getVariable('autoextreme') != null && execution.getVariable('autoextreme') != "AskLater"}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="SequenceFlow_23" name="" sourceRef="ExclusiveGateway_2__prg" targetRef="UserTask_1__prg__p80"/>
    <bpmn2:serviceTask id="ftpExpect__prg" camunda:class="com.ericsson.oss.nfe.poc.tasks.ssh.FTPServiceTask" name="ftp expect script to UAS">
      <bpmn2:extensionElements>
        <camunda:field name="srcFilePath">
          <camunda:expression>${appConfigProps['oss.extremeExpect']}</camunda:expression>
        </camunda:field>
        <camunda:field name="destFilePath">
          <camunda:expression>${appConfigProps['oss.nfs.epg.destFile']}</camunda:expression>
        </camunda:field>
        <camunda:field name="sshHost">
          <camunda:expression>${appConfigProps['oss.ssh.host']}</camunda:expression>
        </camunda:field>
        <camunda:field name="sshPortNumber">
          <camunda:expression>${appConfigProps['oss.ssh.port']}</camunda:expression>
        </camunda:field>
        <camunda:field name="sshUser">
          <camunda:expression>${appConfigProps['oss.ssh.username']}</camunda:expression>
        </camunda:field>
        <camunda:field name="sshPassword">
          <camunda:expression>${appConfigProps['oss.ssh.password']}</camunda:expression>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>remote_SequenceFlow_22</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_7</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_7" name="" sourceRef="ftpExpect__prg" targetRef="BuildExtremeCommand__prg__p80"/>
    <bpmn2:endEvent id="EndError__prg__p100" name="Error End">
      <bpmn2:incoming>SequenceFlow_20</bpmn2:incoming>
      <bpmn2:errorEventDefinition id="_ErrorEventDefinition_7" errorRef="Error_1"/>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="LogError__prg__p95" name="Log Error" scriptFormat="groovy">
      <bpmn2:incoming>error_flow</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_20</bpmn2:outgoing>
      <bpmn2:script><![CDATA[org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger("com.ericsson.oss.nfe.poc.tasks"); 
logger.info( '------------------------------------ ~~ Error happened updating extreme switch ~~----------------------------------');]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_20" name="" sourceRef="LogError__prg__p95" targetRef="EndError__prg__p100"/>
    <bpmn2:scriptTask id="LogSuccessfulCompletion__prg__p95" name="Log Success" scriptFormat="groovy">
      <bpmn2:incoming>success_flow</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_16</bpmn2:outgoing>
      <bpmn2:script><![CDATA[org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger("com.ericsson.oss.nfe.poc.tasks"); 
logger.info( '------------------------------------ ~~ Successfully Configured the Extreme Switch~~----------------------------------');
def names = execution.getVariableNames()
println "Variable names " + names.size() 
println "Variable names " + names.size() + " " + names

 // create an iterator
 //     def iterator = names.iterator(); 
      
      // check values
 //     while (iterator.hasNext()){
  //       def value  = iterator.next()
//		println "names " +value    + " " + execution.getVariable(value)
//	 execution.removeVariable(value)
   //   }


//for (int i=0;i<names.size() ;i++)
//{
//
//}]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_16" name="" sourceRef="LogSuccessfulCompletion__prg__p95" targetRef="EndSuccess__prg__p100"/>
    <bpmn2:endEvent id="EndSuccess__prg__p100" name="Success End">
      <bpmn2:incoming>SequenceFlow_16</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:exclusiveGateway id="SuccessCheck__prg" name="Done ?" default="error_flow">
      <bpmn2:incoming>SequenceFlow_18</bpmn2:incoming>
      <bpmn2:outgoing>success_flow</bpmn2:outgoing>
      <bpmn2:outgoing>error_flow</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="success_flow" name="Success" sourceRef="SuccessCheck__prg" targetRef="LogSuccessfulCompletion__prg__p95">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${successconf}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="error_flow" name="" sourceRef="SuccessCheck__prg" targetRef="LogError__prg__p95"/>
    <bpmn2:scriptTask id="BuildExtremeCommand__prg__p80" name="Build Extreme Command" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_7</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_19</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def extremeUser = execution.getVariable('appConfigProps')['extreme.username']
def extremehost = execution.getVariable('appConfigProps')['extreme.host']
def extremebaseCommand = execution.getVariable('appConfigProps')['extreme.configcommand']
def scriptdir =  execution.getVariable('appConfigProps')['oss.nfs.epg.destFile']
def scriptfileName =  execution.getVariable('appConfigProps')['oss.extremeExpect']


def segId= execution.getVariable('segID');


def excommand = extremebaseCommand +' '+ scriptdir  +'/'+ scriptfileName  + "  " + extremehost+ '   ' +extremeUser+ '   ' +segId
println ' The total extreme command built is --->'+excommand
execution.setVariable('excommand',excommand);

]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_19" name="" sourceRef="BuildExtremeCommand__prg__p80" targetRef="RunExtremeCommand__prg__p90"/>
    <bpmn2:serviceTask id="RunExtremeCommand__prg__p90" camunda:class="com.ericsson.oss.nfe.poc.tasks.ssh.SSHServiceTask" name="Run the Extreme Command">
      <bpmn2:extensionElements>
        <camunda:field name="sshHost">
          <camunda:expression>${appConfigProps['oss.ssh.host']}</camunda:expression>
        </camunda:field>
        <camunda:field name="sshPortNumber">
          <camunda:expression>${appConfigProps['oss.ssh.port']}</camunda:expression>
        </camunda:field>
        <camunda:field name="sshUser">
          <camunda:expression>${appConfigProps['oss.ssh.username']}</camunda:expression>
        </camunda:field>
        <camunda:field name="sshPassword">
          <camunda:expression>${appConfigProps['oss.ssh.password']}</camunda:expression>
        </camunda:field>
        <camunda:field name="command">
          <camunda:expression>${excommand}</camunda:expression>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_19</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_24</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_17</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_17" name="" sourceRef="RunExtremeCommand__prg__p90" targetRef="ExtractOutput__prg"/>
    <bpmn2:scriptTask id="ExtractOutput__prg" name="Extract Command Output" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_17</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_18</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def commandOut = execution.getVariable('sshoutPut')
execution.setVariable('sshoutPut',"")  // it could be huge
if(commandOut!=null && commandOut.equals(""))
{
	execution.setVariable('successconf',true)
}
else
{// assume sucess for now
execution.setVariable('successconf',true)
}]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_18" name="" sourceRef="ExtractOutput__prg" targetRef="SuccessCheck__prg"/>
    <bpmn2:scriptTask id="BuildURL_NetworkIPRange__prg__p40" name="Build  Network by IPRange URL" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_8</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_5</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def getnwurl = execution.getVariable('appConfigProps')['OPEN_STACK_GET_SUBNETWORK']
def publicRange= execution.getVariable('EPG_PUBLIC_RANGE')
if (publicRange==null)
{
	System.out.println("EPG_PUBLIC_RANGE  not set")
	publicRange= execution.getVariable('appConfigProps')['EPG_PUBLIC_RANGE']
	if (publicRange==null)
	{
		System.out.println("appConfigProps.EPG_PUBLIC_RANGE  not set")
		publicRange='10.10.7.0/24'
	}
}
getnwurl = getnwurl+publicRange
System.out.println("getnwurl " + getnwurl )
execution.setVariable('getnwurl',   getnwurl)]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_5" name="" sourceRef="BuildURL_NetworkIPRange__prg__p40" targetRef="GetNetworkByRange__prg__p50"/>
    <bpmn2:scriptTask id="Extract_JSON__prg__p35" name="extract Json" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_14</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_8</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def respSTR = execution.getVariable('JSON_EPG_PUBLIC_RANGE')
println ' respSTR ' + respSTR
println ' respSTR.getJsonStr() ' + respSTR.getJsonStr()

def slurper = new groovy.json.JsonSlurper()
def respJson = slurper.parseText(respSTR.getJsonStr())
println ' respJson  ' + respJson 
def ipAddressRange = respJson.vn.ipAddressRange
execution.setVariable("EPG_PUBLIC_RANGE",ipAddressRange );
println ' ECM Ip Address range ---> '+ipAddressRange 
]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_8" name="" sourceRef="Extract_JSON__prg__p35" targetRef="BuildURL_NetworkIPRange__prg__p40"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway_1__prg" name="Should&#xD;&#xA;Configure?" default="no_update_SequenceFlow_24">
      <bpmn2:incoming>SequenceFlow_22_isset</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_21</bpmn2:incoming>
      <bpmn2:outgoing>yes_SequenceFlow_22</bpmn2:outgoing>
      <bpmn2:outgoing>no_update_SequenceFlow_24</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="yes_SequenceFlow_22" name="Yes" sourceRef="ExclusiveGateway_1__prg" targetRef="ExclusiveGateway_1">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${(execution.getVariable('YesUpdate') !=null && execution.getVariable('YesUpdate') == true ) || (execution.getVariable('autoextreme') == "yes")}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="no_update_SequenceFlow_24" name="No" sourceRef="ExclusiveGateway_1__prg" targetRef="ScriptTask_1"/>
    <bpmn2:scriptTask id="ScriptTask_1" name="Log Status" scriptFormat="groovy">
      <bpmn2:incoming>no_update_SequenceFlow_24</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_25</bpmn2:outgoing>
      <bpmn2:script><![CDATA[org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger("com.ericsson.oss.nfe.poc.tasks"); 
logger.info( '------------------------------------ ~~ No selected for update extreme configure ~~----------------------------------');]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_25" name="" sourceRef="ScriptTask_1" targetRef="SkipEnd__prg__p100"/>
    <bpmn2:endEvent id="SkipEnd__prg__p100" name="Skip&#xD;&#xA;Extreme Config">
      <bpmn2:incoming>SequenceFlow_25</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:userTask id="UserTask_1__prg__p80" camunda:formKey="embedded:app:json:model1:forms/updateextreme-userconfirmation.json" name="User confirmation for Extreme Command">
      <bpmn2:incoming>SequenceFlow_23</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_21</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="SequenceFlow_21" name="" sourceRef="UserTask_1__prg__p80" targetRef="ExclusiveGateway_1__prg"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway_1" name="Deployment&#xD;&#xA;Mode" default="local_SequenceFlow_24">
      <bpmn2:incoming>yes_SequenceFlow_22</bpmn2:incoming>
      <bpmn2:outgoing>remote_SequenceFlow_22</bpmn2:outgoing>
      <bpmn2:outgoing>local_SequenceFlow_24</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="remote_SequenceFlow_22" name="remote" sourceRef="ExclusiveGateway_1" targetRef="ftpExpect__prg">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${execution.getVariable('deploymentMode') != null && execution.getVariable('deploymentMode') == "remote"}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="local_SequenceFlow_24" name="local" sourceRef="ExclusiveGateway_1" targetRef="local_BuildExtCommand__prg__80"/>
    <bpmn2:startEvent id="StartEvent__prg__p0" name="start">
      <bpmn2:outgoing>SequenceFlow_9</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_9" name="" sourceRef="StartEvent__prg__p0" targetRef="BuildAuthRequest__prg__p5"/>
    <bpmn2:scriptTask id="local_BuildExtCommand__prg__80" name="Local&#xD;&#xA;Build Extreme Command" scriptFormat="groovy">
      <bpmn2:incoming>local_SequenceFlow_24</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_24</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def extremeUser = execution.getVariable('appConfigProps')['extreme.username']
def extremehost = execution.getVariable('appConfigProps')['extreme.host']
def extremebaseCommand = execution.getVariable('appConfigProps')['extreme.configcommand']
def scriptdir =  execution.getVariable('appConfigProps')['oss.nfs.epg.destFile']
def scriptfileName =  execution.getVariable('appConfigProps')['oss.extreme.localExpect']


def segId= execution.getVariable('segID');


def excommand = extremebaseCommand +' '+ scriptdir  +'/'+ scriptfileName  + "  " + extremehost+ '   ' +extremeUser+ '   ' +segId
println ' The total extreme command built is --->'+excommand
execution.setVariable('excommand',excommand);]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_24" name="" sourceRef="local_BuildExtCommand__prg__80" targetRef="RunExtremeCommand__prg__p90"/>
  </bpmn2:process>
  <bpmn2:error id="Error_1" errorCode="java.lang.RuntimeException" name="execp"/>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="updateextremeswitch">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_10" bpmnElement="StartEvent__prg__p0">
        <dc:Bounds height="36.0" width="36.0" x="12.0" y="285.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="32.0" x="14.0" y="326.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_20" bpmnElement="GetNetworkByRange__prg__p50">
        <dc:Bounds height="80.0" width="100.0" x="792.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_3" bpmnElement="BuildURL_NetworkIPRange__prg__p40">
        <dc:Bounds height="80.0" width="100.0" x="652.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_5" bpmnElement="SequenceFlow_5" sourceElement="_BPMNShape_ScriptTask_3" targetElement="_BPMNShape_ServiceTask_20">
        <di:waypoint xsi:type="dc:Point" x="752.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="792.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="754.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_22" bpmnElement="Authenticate__prg__p10">
        <dc:Bounds height="80.0" width="100.0" x="204.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_6" bpmnElement="ExtractToken__prg__p15">
        <dc:Bounds height="80.0" width="100.0" x="330.0" y="266.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_3" bpmnElement="SequenceFlow_3" sourceElement="_BPMNShape_ServiceTask_22" targetElement="_BPMNShape_ScriptTask_6">
        <di:waypoint xsi:type="dc:Point" x="304.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="317.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="330.0" y="304.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="326.0" y="304.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_6" bpmnElement="SequenceFlow_6" sourceElement="_BPMNShape_ScriptTask_6" targetElement="_BPMNShape_ExclusiveGateway_9">
        <di:waypoint xsi:type="dc:Point" x="430.0" y="306.0"/>
        <di:waypoint xsi:type="dc:Point" x="474.0" y="306.0"/>
        <di:waypoint xsi:type="dc:Point" x="474.0" y="353.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="453.0" y="306.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_7" bpmnElement="BuildAuthRequest__prg__p5">
        <dc:Bounds height="80.0" width="100.0" x="84.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_9" bpmnElement="SequenceFlow_9" sourceElement="_BPMNShape_StartEvent_10" targetElement="_BPMNShape_ScriptTask_7">
        <di:waypoint xsi:type="dc:Point" x="48.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="84.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="72.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_10" bpmnElement="SequenceFlow_10" sourceElement="_BPMNShape_ScriptTask_7" targetElement="_BPMNShape_ServiceTask_22">
        <di:waypoint xsi:type="dc:Point" x="184.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="204.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="191.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_8" bpmnElement="ExtractBuildURL__prg__p55">
        <dc:Bounds height="80.0" width="100.0" x="942.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_1" bpmnElement="SequenceFlow_1" sourceElement="_BPMNShape_ServiceTask_20" targetElement="_BPMNShape_ScriptTask_8">
        <di:waypoint xsi:type="dc:Point" x="892.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="942.0" y="303.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_23" bpmnElement="GetNetworkByID__prg__p65">
        <dc:Bounds height="80.0" width="100.0" x="1092.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_2" bpmnElement="SequenceFlow_2" sourceElement="_BPMNShape_ScriptTask_8" targetElement="_BPMNShape_ServiceTask_23">
        <di:waypoint xsi:type="dc:Point" x="1042.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="1092.0" y="303.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_9" bpmnElement="ExtractSegmentationID__prg__p75">
        <dc:Bounds height="80.0" width="100.0" x="1242.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_4" bpmnElement="SequenceFlow_4" sourceElement="_BPMNShape_ServiceTask_23" targetElement="_BPMNShape_ScriptTask_9">
        <di:waypoint xsi:type="dc:Point" x="1192.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="1242.0" y="303.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_9" bpmnElement="CheckNameIDMap__prg" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="449.0" y="353.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="0.0" width="0.0" x="474.0" y="408.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_8" bpmnElement="name_ids_set" sourceElement="_BPMNShape_ExclusiveGateway_9" targetElement="_BPMNShape_ScriptTask_17">
        <di:waypoint xsi:type="dc:Point" x="499.0" y="378.0"/>
        <di:waypoint xsi:type="dc:Point" x="535.0" y="378.0"/>
        <di:waypoint xsi:type="dc:Point" x="535.0" y="444.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="536.0" y="417.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_15" bpmnElement="PopulateVMS__prg__p20">
        <dc:Bounds height="80.0" width="100.0" x="345.0" y="444.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_11" bpmnElement="SequenceFlow_11" sourceElement="_BPMNShape_ExclusiveGateway_9" targetElement="_BPMNShape_ScriptTask_15">
        <di:waypoint xsi:type="dc:Point" x="449.0" y="378.0"/>
        <di:waypoint xsi:type="dc:Point" x="395.0" y="378.0"/>
        <di:waypoint xsi:type="dc:Point" x="395.0" y="444.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="457.0" y="374.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_12" bpmnElement="SequenceFlow_12" sourceElement="_BPMNShape_ScriptTask_15" targetElement="_BPMNShape_ScriptTask_17">
        <di:waypoint xsi:type="dc:Point" x="445.0" y="484.0"/>
        <di:waypoint xsi:type="dc:Point" x="485.0" y="484.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="449.0" y="484.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_16" bpmnElement="ECMRequest__prg__p30">
        <dc:Bounds height="80.0" width="100.0" x="611.0" y="444.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_17" bpmnElement="BuildECMRequest__prg__p25">
        <dc:Bounds height="80.0" width="100.0" x="485.0" y="444.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_13" bpmnElement="SequenceFlow_13" sourceElement="_BPMNShape_ScriptTask_17" targetElement="_BPMNShape_ScriptTask_16">
        <di:waypoint xsi:type="dc:Point" x="585.0" y="484.0"/>
        <di:waypoint xsi:type="dc:Point" x="611.0" y="484.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="625.0" y="480.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_14" bpmnElement="SequenceFlow_14" sourceElement="_BPMNShape_ScriptTask_16" targetElement="_BPMNShape_ScriptTask_18">
        <di:waypoint xsi:type="dc:Point" x="661.0" y="444.0"/>
        <di:waypoint xsi:type="dc:Point" x="661.0" y="394.0"/>
        <di:waypoint xsi:type="dc:Point" x="576.0" y="394.0"/>
        <di:waypoint xsi:type="dc:Point" x="576.0" y="343.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="671.0" y="414.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_18" bpmnElement="Extract_JSON__prg__p35">
        <dc:Bounds height="80.0" width="100.0" x="526.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_15" bpmnElement="SequenceFlow_8" sourceElement="_BPMNShape_ScriptTask_18" targetElement="_BPMNShape_ScriptTask_3">
        <di:waypoint xsi:type="dc:Point" x="626.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="652.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="636.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_42" bpmnElement="RunExtremeCommand__prg__p90">
        <dc:Bounds height="80.0" width="100.0" x="1992.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_32" bpmnElement="ExtractOutput__prg">
        <dc:Bounds height="80.0" width="100.0" x="2138.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_18" bpmnElement="SequenceFlow_17" sourceElement="_BPMNShape_ServiceTask_42" targetElement="_BPMNShape_ScriptTask_32">
        <di:waypoint xsi:type="dc:Point" x="2092.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="2138.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2105.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_10" bpmnElement="SuccessCheck__prg" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="2267.0" y="278.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="47.0" x="2317.0" y="295.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_19" bpmnElement="SequenceFlow_18" sourceElement="_BPMNShape_ScriptTask_32" targetElement="_BPMNShape_ExclusiveGateway_10">
        <di:waypoint xsi:type="dc:Point" x="2238.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="2267.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2250.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_33" bpmnElement="LogSuccessfulCompletion__prg__p95">
        <dc:Bounds height="80.0" width="100.0" x="2340.0" y="174.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_7" bpmnElement="success_flow" sourceElement="_BPMNShape_ExclusiveGateway_10" targetElement="_BPMNShape_ScriptTask_33">
        <di:waypoint xsi:type="dc:Point" x="2292.0" y="278.0"/>
        <di:waypoint xsi:type="dc:Point" x="2293.0" y="214.0"/>
        <di:waypoint xsi:type="dc:Point" x="2340.0" y="214.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="57.0" x="2160.0" y="237.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_32" bpmnElement="EndSuccess__prg__p100">
        <dc:Bounds height="36.0" width="36.0" x="2484.0" y="196.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="84.0" x="2460.0" y="237.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_17" bpmnElement="SequenceFlow_16" sourceElement="_BPMNShape_ScriptTask_33" targetElement="_BPMNShape_EndEvent_32">
        <di:waypoint xsi:type="dc:Point" x="2440.0" y="214.0"/>
        <di:waypoint xsi:type="dc:Point" x="2484.0" y="214.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2655.0" y="215.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_34" bpmnElement="LogError__prg__p95">
        <dc:Bounds height="80.0" width="100.0" x="2340.0" y="350.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_20" bpmnElement="error_flow" sourceElement="_BPMNShape_ExclusiveGateway_10" targetElement="_BPMNShape_ScriptTask_34">
        <di:waypoint xsi:type="dc:Point" x="2292.0" y="328.0"/>
        <di:waypoint xsi:type="dc:Point" x="2293.0" y="390.0"/>
        <di:waypoint xsi:type="dc:Point" x="2340.0" y="390.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2254.0" y="390.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_33" bpmnElement="EndError__prg__p100">
        <dc:Bounds height="36.0" width="36.0" x="2484.0" y="372.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="61.0" x="2472.0" y="413.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_21" bpmnElement="SequenceFlow_20" sourceElement="_BPMNShape_ScriptTask_34" targetElement="_BPMNShape_EndEvent_33">
        <di:waypoint xsi:type="dc:Point" x="2440.0" y="390.0"/>
        <di:waypoint xsi:type="dc:Point" x="2484.0" y="390.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2437.0" y="390.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_35" bpmnElement="BuildExtremeCommand__prg__p80">
        <dc:Bounds height="80.0" width="100.0" x="1848.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_23" bpmnElement="SequenceFlow_19" sourceElement="_BPMNShape_ScriptTask_35" targetElement="_BPMNShape_ServiceTask_42">
        <di:waypoint xsi:type="dc:Point" x="1948.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="1992.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1973.0" y="302.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_UserTask_2" bpmnElement="UserTask_1__prg__p80">
        <dc:Bounds height="80.0" width="100.0" x="1488.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_16" bpmnElement="SequenceFlow_15" sourceElement="_BPMNShape_ScriptTask_9" targetElement="_BPMNShape_ExclusiveGateway_16">
        <di:waypoint xsi:type="dc:Point" x="1342.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="1394.0" y="302.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1365.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_11" bpmnElement="ExclusiveGateway_1__prg" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="1608.0" y="145.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="38.0" width="67.0" x="1551.0" y="130.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_24" bpmnElement="SequenceFlow_21" sourceElement="_BPMNShape_UserTask_2" targetElement="_BPMNShape_ExclusiveGateway_11">
        <di:waypoint xsi:type="dc:Point" x="1538.0" y="263.0"/>
        <di:waypoint xsi:type="dc:Point" x="1538.0" y="170.0"/>
        <di:waypoint xsi:type="dc:Point" x="1608.0" y="170.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1535.0" y="238.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_25" bpmnElement="yes_SequenceFlow_22" sourceElement="_BPMNShape_ExclusiveGateway_11" targetElement="_BPMNShape_ExclusiveGateway_17">
        <di:waypoint xsi:type="dc:Point" x="1633.0" y="195.0"/>
        <di:waypoint xsi:type="dc:Point" x="1633.0" y="277.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="29.0" x="1631.0" y="194.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_39" bpmnElement="ScriptTask_1">
        <dc:Bounds height="80.0" width="100.0" x="1692.0" y="131.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_27" bpmnElement="no_update_SequenceFlow_24" sourceElement="_BPMNShape_ExclusiveGateway_11" targetElement="_BPMNShape_ScriptTask_39">
        <di:waypoint xsi:type="dc:Point" x="1658.0" y="170.0"/>
        <di:waypoint xsi:type="dc:Point" x="1692.0" y="171.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="22.0" x="1670.0" y="171.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_35" bpmnElement="SkipEnd__prg__p100">
        <dc:Bounds height="36.0" width="36.0" x="1836.0" y="153.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="38.0" width="95.0" x="1807.0" y="195.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_28" bpmnElement="SequenceFlow_25" sourceElement="_BPMNShape_ScriptTask_39" targetElement="_BPMNShape_EndEvent_35">
        <di:waypoint xsi:type="dc:Point" x="1792.0" y="171.0"/>
        <di:waypoint xsi:type="dc:Point" x="1836.0" y="171.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1814.0" y="171.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_48" bpmnElement="ftpExpect__prg">
        <dc:Bounds height="80.0" width="100.0" x="1711.0" y="263.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_22" bpmnElement="SequenceFlow_7" sourceElement="_BPMNShape_ServiceTask_48" targetElement="_BPMNShape_ScriptTask_35">
        <di:waypoint xsi:type="dc:Point" x="1811.0" y="303.0"/>
        <di:waypoint xsi:type="dc:Point" x="1848.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1816.0" y="303.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_16" bpmnElement="ExclusiveGateway_2__prg" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="1394.0" y="277.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="0.0" width="0.0" x="1419.0" y="332.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_26" bpmnElement="SequenceFlow_22_isset" sourceElement="_BPMNShape_ExclusiveGateway_16" targetElement="_BPMNShape_ExclusiveGateway_11">
        <di:waypoint xsi:type="dc:Point" x="1419.0" y="277.0"/>
        <di:waypoint xsi:type="dc:Point" x="1419.0" y="170.0"/>
        <di:waypoint xsi:type="dc:Point" x="1526.0" y="170.0"/>
        <di:waypoint xsi:type="dc:Point" x="1608.0" y="170.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1416.0" y="195.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_29" bpmnElement="SequenceFlow_23" sourceElement="_BPMNShape_ExclusiveGateway_16" targetElement="_BPMNShape_UserTask_2">
        <di:waypoint xsi:type="dc:Point" x="1444.0" y="302.0"/>
        <di:waypoint xsi:type="dc:Point" x="1488.0" y="303.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1455.0" y="302.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_17" bpmnElement="ExclusiveGateway_1" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="1608.0" y="277.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="38.0" width="85.0" x="1631.0" y="242.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_30" bpmnElement="remote_SequenceFlow_22" sourceElement="_BPMNShape_ExclusiveGateway_17" targetElement="_BPMNShape_ServiceTask_48">
        <di:waypoint xsi:type="dc:Point" x="1658.0" y="302.0"/>
        <di:waypoint xsi:type="dc:Point" x="1684.0" y="302.0"/>
        <di:waypoint xsi:type="dc:Point" x="1711.0" y="302.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1682.0" y="302.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_31" bpmnElement="local_SequenceFlow_24" sourceElement="_BPMNShape_ExclusiveGateway_17" targetElement="_BPMNShape_ScriptTask_41">
        <di:waypoint xsi:type="dc:Point" x="1633.0" y="327.0"/>
        <di:waypoint xsi:type="dc:Point" x="1633.0" y="409.0"/>
        <di:waypoint xsi:type="dc:Point" x="1711.0" y="409.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="33.0" x="1662.0" y="409.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_41" bpmnElement="local_BuildExtCommand__prg__80">
        <dc:Bounds height="80.0" width="100.0" x="1711.0" y="369.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_34" bpmnElement="SequenceFlow_24" sourceElement="_BPMNShape_ScriptTask_41" targetElement="_BPMNShape_ServiceTask_42">
        <di:waypoint xsi:type="dc:Point" x="1811.0" y="409.0"/>
        <di:waypoint xsi:type="dc:Point" x="1901.0" y="409.0"/>
        <di:waypoint xsi:type="dc:Point" x="2041.0" y="409.0"/>
        <di:waypoint xsi:type="dc:Point" x="2042.0" y="343.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1951.0" y="409.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
